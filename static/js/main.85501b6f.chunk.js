(this.webpackJsonpinteractive_markov_chain=this.webpackJsonpinteractive_markov_chain||[]).push([[0],{256:function(e,t,a){e.exports=a(453)},261:function(e,t,a){},453:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(16),l=a.n(i),o=a(105),c=a(17),u=a(512),s=a(218),b=a(510),m=a(511),d=(a(261),a(504)),f=a(454),p=a(505),h=a(506),g=a(507),v=a(508),E=a(509),j=a(497),O=a(15),C=a(514),k=a(503),y=a(457),w=a(515),N=a(458),x=a(217),S=a(103),P=a.n(S),A=a(42);function I(e){var t=e.node;return r.a.createElement(A.d,{width:500,height:300,data:function(e){return e.visited.map((function(e,t){return{name:t.toString(),"visits/# of steps":e/(0===t?1:t)}}))}(t),margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(A.a,{strokeDasharray:"3 3"}),r.a.createElement(A.f,{dataKey:"name"}),r.a.createElement(A.g,null),r.a.createElement(A.e,null),r.a.createElement(A.b,null),r.a.createElement(A.c,{type:"monotone",dataKey:"visits/# of steps",stroke:"#8884d8",activeDot:{r:8}}))}var D=a(94),M=a(66),R=a(22),B=1e-6;function T(e,t){return q(e,t.map((function(e){return[e]}))).map((function(e){return e[0]}))}function q(e,t){if(e[0].length!==t.length)throw Error("Algo de errado nao esta certo");for(var a=Array(e.length).fill([]).map((function(){return Array(t[0].length).fill(0)})),n=0;n<e.length;n++)for(var r=0;r<t[0].length;r++)for(var i=0;i<t.length;i++)a[n][r]+=e[n][i]*t[i][r];return a}function F(e,t){if(0===e.length||e.length!==e[0].length)throw Error("Algo de errado nao esta certo, so q na exponencial");for(var a=e.length,n=Array(a).fill([]).map((function(){return Array(a).fill(0)})),r=0;r<a;r++)n[r][r]=1;for(;t>0;)t%2!==0?(n=q(n,e),t--):(e=q(e,e),t/=2);return n}function W(){var e=Object(n.useState)([new U(0,1)]),t=Object(O.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(0),l=Object(O.a)(i,2),o=l[0],c=l[1],u=Object(n.useState)(0),s=Object(O.a)(u,2),b=s[0],m=s[1],d=Object(n.useMemo)((function(){var e=0;return a.forEach((function(t){e+=t.visited.slice(-1)[0]})),e-1}),[a]);Object(n.useEffect)((function(){0===d&&m(o)}),[d,b,o]);var f=Object(n.useMemo)((function(){var e=function(e){if(0!==e.length){for(var t=Array(e[0].length).fill([]).map((function(){return Array(e.length).fill(0)})),a=0;a<e.length;a++)for(var n=0;n<e[0].length;n++)t[n][a]=e[a][n];return t}}(a.reduce((function(e,t){return e.push(t.transitionProbabilities),e}),[])),t=Array(a.length).fill(0);t[b]=1;var n=T(F(e,d),t),r=T(F(e,1e6),t);return[n,r,function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]+B<t[a]&&e[a]-B>t[a])return!1;return!0}(r,T(e,r))]}),[a,d,b]),p=Object(O.a)(f,3),h=p[0],g=p[1],v=p[2],E=Object(n.useCallback)((function(){var e=Object(R.a)(a).map((function(e){return Object(M.a)({},e,{visited:["0"===e.label?1:0]})}));r(e),c(0)}),[a]),j=Object(n.useCallback)((function(){var e=a.length,t=Object(R.a)(a).map((function(t){var a=Object(M.a)({},t,{transitionProbabilities:Object(R.a)(t.transitionProbabilities)});return a.transitionProbabilities[e]=0,a.visited=["0"===a.label?1:0],a}));t.push(new U(e)),c(0),r(t)}),[a]),C=Object(n.useCallback)((function(){var e=Math.random(),t=0,n=a[o].transitionProbabilities,i=function(i){if((t+=n[i])>e-B){var l=Object(R.a)(a).map((function(e){var t=Object(M.a)({},e);return t.visited.push(t.visited.slice(-1)[0]+(t.label===i)),t}));return r(l),c(i),{v:void 0}}};for(var l in n){var u=i(l);if("object"===typeof u)return u.v}throw new Error("Iterate couldn't find the next node")}),[a,o]),k=Object(n.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(R.a)(a),l=t.reduce((function(e,t){return e+t}));if(n){for(var o in t)t[o]/=l;l=1}var c=Object(M.a)({},i[e]);return c.transitionProbabilities=t,i[e]=c,!(l+B<1||l-B>1)&&(r(i),!0)}),[a]),y=Object(n.useCallback)((function(){if(1!==a.length){c(0);var e=a.slice(0,-1).map((function(e){var t=Object(M.a)({},e),a=Object(R.a)(e.transitionProbabilities);a.pop();var n=a.reduce((function(e,t){return e+t}));return(n+B<1||n-B>1)&&(0===n&&(a[t.label]=1,n=1),a=a.map((function(e){return e/n}))),t.transitionProbabilities=a,t.visited=["0"===t.label?1:0],t}));r(e)}}),[a]),w=Object(n.useCallback)((function(){var e=Array.from(Array(5).keys()).map((function(e){var t=new U(e,"0"===e?1:0),a=Array(5).fill(0),n=(parseInt(t.label)+1)%5,r=(parseInt(t.label)-1+5)%5;return a[n]=.5,a[r]=.5,t.transitionProbabilities=a,t}));r(e)}),[]);return window.runTest=w,{totalSteps:d,nodes:a,currentNode:o,expected:h,equilibrium:g,equilibriumExists:v,resetIteration:E,setCurrentNode:c,addNode:j,removeNode:y,iterate:C,test:w,tryUpdateNodeProbabilities:k}}var U=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(D.a)(this,e),this.label=t.toString(),this.visited=[a],this.transitionProbabilities=new Array(t+1).fill(0),this.transitionProbabilities[t]=1},_=a(498),L=a(499),V=a(500),z=a(501),H=a(502),J=a(493),K=a(513);var $=function(e){var t=e.label,a=e.probability,i=e.onChange,l=Object(n.useCallback)((function(){a<0?i(0):a>1&&i(1)}),[a,i]),o=Object(n.useCallback)((function(e,t){return i(t)}),[i]),c=Object(n.useCallback)((function(e){return i(e.target.value)}),[i]);return r.a.createElement("div",null,r.a.createElement("p",null,"Node ",t),r.a.createElement(J.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(J.a,{item:!0,xs:!0},r.a.createElement(C.a,{value:a,onChange:o,"aria-labelledby":"input-slider",step:.01,min:0,max:1})),r.a.createElement(J.a,{item:!0},r.a.createElement(K.a,{value:a,variant:"outlined",onChange:c,onBlur:l,type:"number",inputProps:{step:.1,min:0,max:1,"aria-labelledby":"input-slider"}}))))},G=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:e.spacing(40),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),height:"100%"},subtitle:{marginBottom:e.spacing(1)},inputsContainer:{"& > *":{marginBottom:e.spacing(4)}},buttonsContainer:{marginTop:"auto",marginBottom:e.spacing(2),"& > *":{margin:e.spacing(1)}}}}));var Q=function(e){var t=e.node,a=e.tryUpdateNodeProbabilities,i=e.toggleDrawer,l=G(),o=Object(n.useState)(!1),c=Object(O.a)(o,2),u=c[0],s=c[1],b=Object(n.useState)(t.transitionProbabilities),m=Object(O.a)(b,2),d=m[0],f=m[1],p=Object(n.useCallback)((function(){return s(!u)}),[s,u]),h=Object(n.useCallback)((function(){a(d,!0),i()}),[a,i,d]),g=Object(n.useCallback)((function(){a(d)?i():p()}),[i,p,a,d]),v=Object(n.useMemo)((function(){return Object.entries(d).map((function(e){var t=Object(O.a)(e,1)[0];return function(e){var a=Object(R.a)(d);a[t]=parseFloat(e),f(a)}}))}),[d,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.root},r.a.createElement("h1",null,"Editing Node ",t.label),r.a.createElement("h3",{className:l.subtitle},"Transition Probabilities"),r.a.createElement("div",{className:l.inputsContainer},Object.entries(d).map((function(e){var t=Object(O.a)(e,2),a=t[0],n=t[1];return r.a.createElement($,{key:a,label:a,probability:n,onChange:v[a]})}))),r.a.createElement("div",{className:l.buttonsContainer},r.a.createElement(y.a,{onClick:i},"Cancel"),r.a.createElement(y.a,{onClick:g},"Confirm"))),r.a.createElement(_.a,{open:u,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(L.a,{id:"alert-dialog-title"},"Normalize transition values?"),r.a.createElement(V.a,null,r.a.createElement(z.a,{id:"alert-dialog-description"},"The inserted transition values sum is not 1. Do you want to normalize those values and continue?")),r.a.createElement(H.a,null,r.a.createElement(y.a,{onClick:p,color:"primary"},"Cancel"),r.a.createElement(y.a,{onClick:h,color:"primary",autoFocus:!0},"Continue"))))},X=a(67),Y=Object(j.a)((function(e){return{container:{width:"50%",float:"left",padding:"20px"},graphContainer:{},sliderContainer:{marginBottom:e.spacing(2),marginTop:e.spacing(2),width:300},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Z(){return{width:600,height:400,top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var ee=function(e){var t=e.nodes,a=e.tryUpdateNodeProbabilities,i=e.addNode,l=e.removeNode,o=e.iterate,c=e.currentNode,u=e.resetIteration,s=Object(n.useState)(null),b=Object(O.a)(s,2),m=b[0],d=b[1],p=Object(n.useState)(!1),h=Object(O.a)(p,2),g=h[0],v=h[1],E=Object(n.useState)(!1),j=Object(O.a)(E,2),S=j[0],A=j[1],D=Object(n.useState)(null),M=Object(O.a)(D,2),R=M[0],B=M[1],T=Object(n.useState)(10),q=Object(O.a)(T,2),F=q[0],W=q[1],U=Object(n.useCallback)((function(){return v(!g)}),[v,g]),_=Object(n.useCallback)((function(){return A(!S)}),[A,S]),L=r.a.useState(Z),V=Object(O.a)(L,1)[0],z=Object(n.useCallback)((function(e){d(e.id),U()}),[d,U]),H=Object(n.useCallback)((function(e){d(e.id),ee()}),[d,_]),J=Object(n.useCallback)((function(e){return e.width}),[]),K=Object(n.useCallback)((function(){return"#e3e3e3"}),[]),$=Object(n.useCallback)((function(e,t){return W(t)}),[W]),G=Y(),ee=function(){A(!0)},te=Object(n.useMemo)((function(){return{node:t[m],tryUpdateNodeProbabilities:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(m,e,t)},toggleDrawer:U}}),[t,a,U,m]),ae=Object(n.useMemo)((function(){return{node:t[m]}}),[t,m]),ne=Object(n.useMemo)((function(){return{nodes:t.map((function(e){return{id:e.label,name:e.label,isCurrentNode:e.label===c.toString(),x:X.nodesPosition[e.label]&&X.nodesPosition[e.label][0],y:X.nodesPosition[e.label]&&X.nodesPosition[e.label][1]}})),links:P.a.flatten(t.map((function(e){return Object.entries(e.transitionProbabilities).map((function(t){var a=Object(O.a)(t,2),n=a[0],r=a[1];return{source:e.label,target:n,width:5*r}})).filter((function(e){return e.width>0}))})))}}),[t,c]),re=Object(n.useRef)(null),ie=Object(n.useCallback)((function(){if(0!==F){o();var e=setTimeout((function(){re.current()}),5e3/F);B(e)}else B(null)}),[o,B,F]);re.current=ie;var le=Object(n.useCallback)((function(){P.a.isNull(R)&&ie()}),[ie,R]),oe=Object(n.useCallback)((function(){B(null)}),[]);Object(n.useEffect)((function(){return function(){P.a.isNull(R)||clearTimeout(R)}}),[R,B]);var ce=r.a.createElement("div",{style:V,className:G.paper},r.a.createElement("h2",{id:"simple-modal-title"},"History of Node ",m),r.a.createElement("p",{id:"simple-modal-description"}),r.a.createElement(I,ae));return r.a.createElement("div",{className:G.container},r.a.createElement(f.a,{className:G.graphContainer},r.a.createElement(x.a,{width:535,height:300,graphData:ne,onNodeClick:z,onNodeRightClick:H,nodeLabel:"id",linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1,linkCurvature:.25,linkWidth:J,nodeCanvasObject:X.renderNodeCanvas,d3VelocityDecay:1,linkColor:K})),r.a.createElement("div",{className:G.sliderContainer},r.a.createElement("p",null,"Run Speed"),r.a.createElement(C.a,{value:F,onChange:$,"aria-labelledby":"speed-slider",step:1,min:0,max:200})),r.a.createElement("div",{align:"left"},r.a.createElement(k.a,{"aria-label":"outlined primary button group"},r.a.createElement(y.a,{onClick:i},"Add Node"),r.a.createElement(y.a,{onClick:l},"Remove Node"),r.a.createElement(y.a,{onClick:o},"Step"),r.a.createElement(y.a,{onClick:le},"Run"),r.a.createElement(y.a,{onClick:oe},"Stop"),r.a.createElement(y.a,{onClick:u},"Reset"))),r.a.createElement(w.a,{anchor:"left",open:g,onClose:U},r.a.createElement(Q,te)),r.a.createElement(N.a,{open:S,onClose:function(){A(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},ce))};var te=Object(j.a)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"flex-start"},tableContainer:{width:"50%",padding:"20px"},table:{minWidth:400}}})),ae=function(){var e=te(),t=W();return window.markovChainState=t,r.a.createElement("div",null,r.a.createElement("h1",null,"Interactive Markov Chains"),r.a.createElement("h2",null,"State Statistics"),r.a.createElement("p",null,"Steps: ",t.totalSteps),r.a.createElement("div",{className:e.container},0===t.nodes.length?r.a.createElement("div",{className:e.tableContainer},r.a.createElement(d.a,{component:f.a})):r.a.createElement("div",{className:e.tableContainer},r.a.createElement(d.a,{component:f.a},r.a.createElement(p.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(v.a,{align:"left",width:"50"},"Node"),r.a.createElement(v.a,{align:"right"},"Visits"),r.a.createElement(v.a,{align:"right"},"Visits (%)"),r.a.createElement(v.a,{align:"right"},"Expected (%)"),r.a.createElement(v.a,{align:"right"},"Expected at Equilibrium (%)"))),r.a.createElement(E.a,null,t.nodes.map((function(e){return r.a.createElement(g.a,{key:e.label},r.a.createElement(v.a,{component:"th",scope:"row"},e.label),r.a.createElement(v.a,{align:"right"},e.visited.slice(-1)[0]),r.a.createElement(v.a,{align:"right"},(100*e.visited.slice(-1)[0]/(0===t.totalSteps?1:t.totalSteps)).toFixed(2)),r.a.createElement(v.a,{align:"right"},(100*t.expected[parseInt(e.label)]).toFixed(2)),r.a.createElement(v.a,{align:"right"},t.equilibriumExists?(100*t.equilibrium[parseInt(e.label)]).toFixed(2):"-"))})))))),r.a.createElement(ee,t)))};var ne=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"About"))},re=Object(s.a)({palette:{type:"dark"}});var ie=function(){return r.a.createElement(b.a,{theme:re},r.a.createElement(m.a,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"pageContainer"},r.a.createElement("div",null,r.a.createElement(u.a,{component:o.b,to:"/"},"Home"),r.a.createElement(u.a,{component:o.b,to:"/about"},"About")),r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/about"},r.a.createElement(ne,null)),r.a.createElement(c.a,{path:"/"},r.a.createElement(ae,null)))))))};a(452),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t){var a={};e.exports={nodesPosition:a,renderNodeCanvas:function(e,t,n){var r=e.id;a[e.id]=[e.x,e.y],t.font="".concat(4,"px Roboto"),t.fillStyle="#3f3f3f",t.beginPath(),t.arc(e.x,e.y,4.25,0,2*Math.PI,!1),t.fill(),e.isCurrentNode&&(t.arc(e.x,e.y,4.25,0,2*Math.PI,!1),t.lineWidth=.6,t.strokeStyle="#ffffff",t.stroke()),t.fillStyle="#ffffff",t.textAlign="center",t.textBaseline="middle",t.fillText(r,e.x,e.y)}}}},[[256,1,2]]]);
//# sourceMappingURL=main.85501b6f.chunk.js.map