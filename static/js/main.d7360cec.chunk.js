(this.webpackJsonpinteractive_markov_chain=this.webpackJsonpinteractive_markov_chain||[]).push([[0],{256:function(e,t,a){e.exports=a(453)},261:function(e,t,a){},453:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(16),l=a.n(i),o=a(214),c=a(17),u=a(216),s=a(510),b=a(511),m=(a(261),a(504)),d=a(454),f=a(505),p=a(506),h=a(507),g=a(508),v=a(509),E=a(497),j=a(15),O=a(513),C=a(503),k=a(457),y=a(514),w=a(458),N=a(215),x=a(103),S=a.n(x),P=a(42);function A(e){var t=e.node;return r.a.createElement(P.d,{width:500,height:300,data:function(e){return e.visited.map((function(e,t){return{name:t.toString(),"visits/# of steps":e/(0===t?1:t)}}))}(t),margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(P.a,{strokeDasharray:"3 3"}),r.a.createElement(P.f,{dataKey:"name"}),r.a.createElement(P.g,null),r.a.createElement(P.e,null),r.a.createElement(P.b,null),r.a.createElement(P.c,{type:"monotone",dataKey:"visits/# of steps",stroke:"#8884d8",activeDot:{r:8}}))}var I=a(22),D=a(498),M=a(499),R=a(500),B=a(501),T=a(502),q=a(493),F=a(512);var W=function(e){var t=e.label,a=e.probability,i=e.onChange,l=Object(n.useCallback)((function(){a<0?i(0):a>1&&i(1)}),[a,i]),o=Object(n.useCallback)((function(e,t){return i(t)}),[i]),c=Object(n.useCallback)((function(e){return i(e.target.value)}),[i]);return r.a.createElement("div",null,r.a.createElement("p",null,"Node ",t),r.a.createElement(q.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(q.a,{item:!0,xs:!0},r.a.createElement(O.a,{value:a,onChange:o,"aria-labelledby":"input-slider",step:.01,min:0,max:1})),r.a.createElement(q.a,{item:!0},r.a.createElement(F.a,{value:a,variant:"outlined",onChange:c,onBlur:l,type:"number",inputProps:{step:.1,min:0,max:1,"aria-labelledby":"input-slider"}}))))},U=Object(E.a)((function(e){return{root:{display:"flex",flexDirection:"column",width:e.spacing(40),paddingLeft:e.spacing(3),paddingRight:e.spacing(3),height:"100%"},subtitle:{marginBottom:e.spacing(1)},inputsContainer:{"& > *":{marginBottom:e.spacing(4)}},buttonsContainer:{marginTop:"auto",marginBottom:e.spacing(2),"& > *":{margin:e.spacing(1)}}}}));var _=function(e){var t=e.node,a=e.tryUpdateNodeProbabilities,i=e.toggleDrawer,l=U(),o=Object(n.useState)(!1),c=Object(j.a)(o,2),u=c[0],s=c[1],b=Object(n.useState)(t.transitionProbabilities),m=Object(j.a)(b,2),d=m[0],f=m[1],p=Object(n.useCallback)((function(){return s(!u)}),[s,u]),h=Object(n.useCallback)((function(){a(d,!0),i()}),[a,i,d]),g=Object(n.useCallback)((function(){a(d)?i():p()}),[i,p,a,d]),v=Object(n.useMemo)((function(){return Object.entries(d).map((function(e){var t=Object(j.a)(e,1)[0];return function(e){var a=Object(I.a)(d);a[t]=parseFloat(e),f(a)}}))}),[d,f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.root},r.a.createElement("h1",null,"Editing Node ",t.label),r.a.createElement("h3",{className:l.subtitle},"Transition Probabilities"),r.a.createElement("div",{className:l.inputsContainer},Object.entries(d).map((function(e){var t=Object(j.a)(e,2),a=t[0],n=t[1];return r.a.createElement(W,{key:a,label:a,probability:n,onChange:v[a]})}))),r.a.createElement("div",{className:l.buttonsContainer},r.a.createElement(k.a,{onClick:i},"Cancel"),r.a.createElement(k.a,{onClick:g},"Confirm"))),r.a.createElement(D.a,{open:u,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(M.a,{id:"alert-dialog-title"},"Normalize transition values?"),r.a.createElement(R.a,null,r.a.createElement(B.a,{id:"alert-dialog-description"},"The inserted transition values sum is not 1. Do you want to normalize those values and continue?")),r.a.createElement(T.a,null,r.a.createElement(k.a,{onClick:p,color:"primary"},"Cancel"),r.a.createElement(k.a,{onClick:h,color:"primary",autoFocus:!0},"Continue"))))},L=a(65),V=Object(E.a)((function(e){return{container:{width:"50%",float:"left",padding:"20px"},graphContainer:{},sliderContainer:{marginBottom:e.spacing(2),marginTop:e.spacing(2),width:300},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function z(){return{width:600,height:400,top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var J=function(e){var t=e.nodes,a=e.tryUpdateNodeProbabilities,i=e.addNode,l=e.removeNode,o=e.iterate,c=e.currentNode,u=e.resetIteration,s=Object(n.useState)(null),b=Object(j.a)(s,2),m=b[0],f=b[1],p=Object(n.useState)(!1),h=Object(j.a)(p,2),g=h[0],v=h[1],E=Object(n.useState)(!1),x=Object(j.a)(E,2),P=x[0],I=x[1],D=Object(n.useState)(null),M=Object(j.a)(D,2),R=M[0],B=M[1],T=Object(n.useState)(10),q=Object(j.a)(T,2),F=q[0],W=q[1],U=Object(n.useCallback)((function(){return v(!g)}),[v,g]),J=r.a.useState(z),K=Object(j.a)(J,1)[0],H=Object(n.useCallback)((function(){I(!0)}),[I]),$=Object(n.useCallback)((function(e){f(e.id),U()}),[f,U]),G=Object(n.useCallback)((function(e){f(e.id),H()}),[f,H]),Q=Object(n.useCallback)((function(e){return e.width}),[]),X=Object(n.useCallback)((function(){return"#e3e3e3"}),[]),Y=Object(n.useCallback)((function(e,t){return W(t)}),[W]),Z=V(),ee=Object(n.useMemo)((function(){return{node:t[m],tryUpdateNodeProbabilities:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a(m,e,t)},toggleDrawer:U}}),[t,a,U,m]),te=Object(n.useMemo)((function(){return{node:t[m]}}),[t,m]),ae=Object(n.useMemo)((function(){return{nodes:t.map((function(e){return{id:e.label,name:e.label,isCurrentNode:e.label===c.toString(),x:L.nodesPosition[e.label]&&L.nodesPosition[e.label][0],y:L.nodesPosition[e.label]&&L.nodesPosition[e.label][1]}})),links:S.a.flatten(t.map((function(e){return Object.entries(e.transitionProbabilities).map((function(t){var a=Object(j.a)(t,2),n=a[0],r=a[1];return{source:e.label,target:n,width:5*r}})).filter((function(e){return e.width>0}))})))}}),[t,c]),ne=Object(n.useRef)(null),re=Object(n.useCallback)((function(){if(0!==F){o();var e=setTimeout((function(){ne.current()}),5e3/F);B(e)}else B(null)}),[o,B,F]);ne.current=re;var ie=Object(n.useCallback)((function(){S.a.isNull(R)&&re()}),[re,R]),le=Object(n.useCallback)((function(){B(null)}),[]);Object(n.useEffect)((function(){return function(){S.a.isNull(R)||clearTimeout(R)}}),[R,B]);var oe=r.a.createElement("div",{style:K,className:Z.paper},r.a.createElement("h2",{id:"simple-modal-title"},"History of Node ",m),r.a.createElement("p",{id:"simple-modal-description"}),r.a.createElement(A,te));return r.a.createElement("div",{className:Z.container},r.a.createElement(d.a,{className:Z.graphContainer},r.a.createElement(N.a,{width:535,height:300,graphData:ae,onNodeClick:$,onNodeRightClick:G,nodeLabel:"id",linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1,linkCurvature:.25,linkWidth:Q,nodeCanvasObject:L.renderNodeCanvas,d3VelocityDecay:1,linkColor:X})),r.a.createElement("div",{className:Z.sliderContainer},r.a.createElement("p",null,"Run Speed"),r.a.createElement(O.a,{value:F,onChange:Y,"aria-labelledby":"speed-slider",step:1,min:0,max:200})),r.a.createElement("div",{align:"left"},r.a.createElement(C.a,{"aria-label":"outlined primary button group"},r.a.createElement(k.a,{onClick:i},"Add Node"),r.a.createElement(k.a,{onClick:l},"Remove Node"),r.a.createElement(k.a,{onClick:o},"Step"),r.a.createElement(k.a,{onClick:ie},"Run"),r.a.createElement(k.a,{onClick:le},"Stop"),r.a.createElement(k.a,{onClick:u},"Reset"))),r.a.createElement(y.a,{anchor:"left",open:g,onClose:U},r.a.createElement(_,ee)),r.a.createElement(w.a,{open:P,onClose:function(){I(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},oe))},K=a(100),H=a(66),$=1e-6;function G(e,t){return Q(e,t.map((function(e){return[e]}))).map((function(e){return e[0]}))}function Q(e,t){if(e[0].length!==t.length)throw Error("Algo de errado nao esta certo");for(var a=Array(e.length).fill([]).map((function(){return Array(t[0].length).fill(0)})),n=0;n<e.length;n++)for(var r=0;r<t[0].length;r++)for(var i=0;i<t.length;i++)a[n][r]+=e[n][i]*t[i][r];return a}function X(e,t){if(0===e.length||e.length!==e[0].length)throw Error("Algo de errado nao esta certo, so q na exponencial");for(var a=e.length,n=Array(a).fill([]).map((function(){return Array(a).fill(0)})),r=0;r<a;r++)n[r][r]=1;for(;t>0;)t%2!==0?(n=Q(n,e),t--):(e=Q(e,e),t/=2);return n}function Y(){var e=Object(n.useState)([new Z(0,1)]),t=Object(j.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(0),l=Object(j.a)(i,2),o=l[0],c=l[1],u=Object(n.useState)(0),s=Object(j.a)(u,2),b=s[0],m=s[1],d=Object(n.useMemo)((function(){var e=0;return a.forEach((function(t){e+=t.visited.slice(-1)[0]})),e-1}),[a]);Object(n.useEffect)((function(){0===d&&m(o)}),[d,b,o]);var f=Object(n.useMemo)((function(){var e=function(e){if(0!==e.length){for(var t=Array(e[0].length).fill([]).map((function(){return Array(e.length).fill(0)})),a=0;a<e.length;a++)for(var n=0;n<e[0].length;n++)t[n][a]=e[a][n];return t}}(a.reduce((function(e,t){return e.push(t.transitionProbabilities),e}),[])),t=Array(a.length).fill(0);t[b]=1;var n=G(X(e,d),t),r=G(X(e,1e6),t);return[n,r,function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]+$<t[a]&&e[a]-$>t[a])return!1;return!0}(r,G(e,r))]}),[a,d,b]),p=Object(j.a)(f,3),h=p[0],g=p[1],v=p[2],E=Object(n.useCallback)((function(){var e=Object(I.a)(a).map((function(e){return Object(H.a)({},e,{visited:["0"===e.label?1:0]})}));r(e),c(0)}),[a]),O=Object(n.useCallback)((function(){var e=a.length,t=Object(I.a)(a).map((function(t){var a=Object(H.a)({},t,{transitionProbabilities:Object(I.a)(t.transitionProbabilities)});return a.transitionProbabilities[e]=0,a.visited=["0"===a.label?1:0],a}));t.push(new Z(e)),c(0),r(t)}),[a]),C=Object(n.useCallback)((function(){var e=Math.random(),t=0,n=a[o].transitionProbabilities,i=function(i){if((t+=n[i])>e-$){var l=Object(I.a)(a).map((function(e){var t=Object(H.a)({},e);return t.visited.push(t.visited.slice(-1)[0]+(t.label===i)),t}));return r(l),c(i),{v:void 0}}};for(var l in n){var u=i(l);if("object"===typeof u)return u.v}throw new Error("Iterate couldn't find the next node")}),[a,o]),k=Object(n.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(I.a)(a),l=t.reduce((function(e,t){return e+t}));if(n){for(var o in t)t[o]/=l;l=1}var c=Object(H.a)({},i[e]);return c.transitionProbabilities=t,i[e]=c,!(l+$<1||l-$>1)&&(r(i),!0)}),[a]),y=Object(n.useCallback)((function(){if(1!==a.length){c(0);var e=a.slice(0,-1).map((function(e){var t=Object(H.a)({},e),a=Object(I.a)(e.transitionProbabilities);a.pop();var n=a.reduce((function(e,t){return e+t}));return(n+$<1||n-$>1)&&(0===n&&(a[t.label]=1,n=1),a=a.map((function(e){return e/n}))),t.transitionProbabilities=a,t.visited=["0"===t.label?1:0],t}));r(e)}}),[a]),w=Object(n.useCallback)((function(){var e=Array.from(Array(5).keys()).map((function(e){var t=new Z(e,"0"===e?1:0),a=Array(5).fill(0),n=(parseInt(t.label)+1)%5,r=(parseInt(t.label)-1+5)%5;return a[n]=.5,a[r]=.5,t.transitionProbabilities=a,t}));r(e)}),[]);return window.runTest=w,{totalSteps:d,nodes:a,currentNode:o,expected:h,equilibrium:g,equilibriumExists:v,resetIteration:E,setCurrentNode:c,addNode:O,removeNode:y,iterate:C,test:w,tryUpdateNodeProbabilities:k}}var Z=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(K.a)(this,e),this.label=t.toString(),this.visited=[a],this.transitionProbabilities=new Array(t+1).fill(0),this.transitionProbabilities[t]=1};var ee=Object(E.a)((function(e){return{container:{display:"flex",flexDirection:"row",alignItems:"flex-start"},tableContainer:{width:"50%",padding:"20px"},table:{minWidth:400}}})),te=function(){var e=ee(),t=Y();return window.markovChainState=t,r.a.createElement("div",null,r.a.createElement("h1",null,"Interactive Markov Chains"),r.a.createElement("h2",null,"State Statistics"),r.a.createElement("p",null,"Steps: ",t.totalSteps),r.a.createElement("div",{className:e.container},0===t.nodes.length?r.a.createElement("div",{className:e.tableContainer},r.a.createElement(m.a,{component:d.a})):r.a.createElement("div",{className:e.tableContainer},r.a.createElement(m.a,{component:d.a},r.a.createElement(f.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(p.a,null,r.a.createElement(h.a,null,r.a.createElement(g.a,{align:"left",width:"50"},"Node"),r.a.createElement(g.a,{align:"right"},"Visits"),r.a.createElement(g.a,{align:"right"},"Visits (%)"),r.a.createElement(g.a,{align:"right"},"Expected (%)"),r.a.createElement(g.a,{align:"right"},"Expected at Equilibrium (%)"))),r.a.createElement(v.a,null,t.nodes.map((function(e){return r.a.createElement(h.a,{key:e.label},r.a.createElement(g.a,{component:"th",scope:"row"},e.label),r.a.createElement(g.a,{align:"right"},e.visited.slice(-1)[0]),r.a.createElement(g.a,{align:"right"},(100*e.visited.slice(-1)[0]/(0===t.totalSteps?1:t.totalSteps)).toFixed(2)),r.a.createElement(g.a,{align:"right"},(100*t.expected[parseInt(e.label)]).toFixed(2)),r.a.createElement(g.a,{align:"right"},t.equilibriumExists?(100*t.equilibrium[parseInt(e.label)]).toFixed(2):"-"))})))))),r.a.createElement(J,t)))};var ae=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"About"))},ne=Object(u.a)({palette:{type:"dark"}});var re=function(){return r.a.createElement(s.a,{theme:ne},r.a.createElement(b.a,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"pageContainer"},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/about"},r.a.createElement(ae,null)),r.a.createElement(c.a,{path:"/"},r.a.createElement(te,null)))))))};a(452),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t){var a={};e.exports={nodesPosition:a,renderNodeCanvas:function(e,t,n){var r=e.id;a[e.id]=[e.x,e.y],t.font="".concat(4,"px Roboto"),t.fillStyle="#3f3f3f",t.beginPath(),t.arc(e.x,e.y,4.25,0,2*Math.PI,!1),t.fill(),e.isCurrentNode&&(t.arc(e.x,e.y,4.25,0,2*Math.PI,!1),t.lineWidth=.6,t.strokeStyle="#ffffff",t.stroke()),t.fillStyle="#ffffff",t.textAlign="center",t.textBaseline="middle",t.fillText(r,e.x,e.y)}}}},[[256,1,2]]]);
//# sourceMappingURL=main.d7360cec.chunk.js.map